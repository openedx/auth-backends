#check package-lock file version

name: ASCII check

on:
  push:
    branches:
    - 'master'
  pull_request:

jobs:
  ascii-check:
    runs-on:  ubuntu-20.04
    outputs:
      output1: ${{ steps.getversion.outputs.version }}
    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Get non-ascii characters
      id: getnonascii
      run: echo "::set-output name=characters::$(grep -m 1 -P "[^\x00-\x7F]" setup.cfg)"
      
    - name: check value
      if: ${{ steps.getnonascii.outputs.characters != null }}
      run: |
        echo "ERROR: Non-ASCII characters found in setup.cfg."
        exit 1
